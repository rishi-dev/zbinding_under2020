/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/documentation/sdk/controller/MasterTreeBaseController","sap/ui/documentation/sdk/controller/util/APIInfo","sap/ui/model/json/JSONModel"],function(M,A,J){"use strict";return M.extend("sap.ui.documentation.sdk.controller.TopicMaster",{onInit:function(){this.oJSONContent=this._fetchDocuIndex();var m=new J(this.oJSONContent);this.getView().setModel(m);this._initTreeUtil("key","links");this.getRouter().getRoute("topic").attachPatternMatched(this._onMatched,this);this.getRouter().getRoute("topicId").attachPatternMatched(this._onTopicMatched,this);},_onTopicMatched:function(a){try{this.showMasterSide();}catch(e){jQuery.sap.log.error(e);}this._topicId=a.getParameter("arguments").id;this._expandTreeToNode(this._topicId,this.getModel());},_onMatched:function(){var s=this.getView().getParent().getParent();s.setMode(sap.m.SplitAppMode.ShowHideMode);this._expandFirstNodeOnly();},_fetchDocuIndex:function(){var r=jQuery.sap.syncGetJSON(this.getConfig().docuPath+"index.json");if(r.data===undefined){return[];}var d=r.data.links;return this._preProcessDocuIndex(d);},_preProcessDocuIndex:function(d){var m="95d113be50ae40d5b0b562b84d715227",t="1b4124400a764ec0a8623d0d5c585321",p,T,o,a;p=d.filter(function(e){return e.text!==""&&e.key!=="index";});for(var i=0;i<p.length;i++){if(p[i].key===m){a=p[i];}else if(p[i].key===t){o=p[i];T=i;}}if(a&&o){p.splice(T,1);a.links.push(o);}return p;},onNodeSelect:function(e){var n=e.getParameter("listItem"),t=n.getCustomData()[0].getValue(),r;if(!t){jQuery.sap.log.warning("Missing key for entity: "+n.getId()+" - cannot navigate to topic");return;}r=this.getRouter();if(t==="a6a78b7e104348b4bb94fb8bcf003480"){r.navTo("releaseNotes");return;}r.navTo("topicId",{id:t},false);},onTreeFilter:function(e){M.prototype.onTreeFilter.apply(this,[e,"text"]);}});});
